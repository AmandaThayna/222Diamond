<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>222Diamond</title>
    <link type="text/css" rel="stylesheet" href="style.css" />
    <script type="text/javascript">
        var credito = 0;
        var aposta = 1;

        // Função para verificar se o usuário está logado
        function verificarLogin() {
            var usuarioLogado = localStorage.getItem('usuarioLogado');
            if (!usuarioLogado) {
                window.location.href = 'index.html'; // Redireciona se não houver usuário logado
            } else {
                // Se o usuário estiver logado, carregar seus créditos
                credito = parseInt(localStorage.getItem(usuarioLogado)) || 0;
                document.getElementById('credito').value = 'R$ ' + credito;
            }
        }

        function aleatorio(inferior, superior) {
            var numPossibilidades = superior - inferior;
            var aleat = Math.random() * numPossibilidades;
            aleat = Math.floor(aleat);
            return parseInt(inferior) + aleat;
        }

        function apostaMenos() {
            if (aposta > 1) {
                aposta--;
                document.getElementById('aposta').value = 'R$ ' + aposta;
            }
        }

        function apostaMais() {
            if (aposta < 500) {
                aposta++;
                document.getElementById('aposta').value = 'R$ ' + aposta;
            }
        }

        function jogar() {
            if (credito < 1 || credito < aposta) {
                var aux = window.prompt("Coloque mais créditos, digite a quantidade em R$:", "1");
                aux = parseInt(aux);
                credito = parseInt(credito);
                credito = credito + aux;
                document.getElementById('credito').value = 'R$ ' + credito;
                localStorage.setItem(localStorage.getItem('usuarioLogado'), credito); // Atualiza créditos no localStorage
            } else {
                if (credito > 0 && credito >= aposta) {
                    credito = credito - aposta;
                    document.getElementById('credito').value = 'R$ ' + credito;
                    document.getElementById('escud1').src = 'img/roleta.gif';
                    document.getElementById('escud2').src = 'img/roleta.gif';
                    document.getElementById('escud3').src = 'img/roleta.gif';
                    document.getElementById('escud4').src = 'img/roleta.gif';

                    // (Lógica para slots continua aqui...)
                }
            }
        }

        // Chama verificarLogin ao carregar a página
        window.onload = verificarLogin;
    </script>
</head>
<body>
    <div id="corpo">
        <div id="creditos_txt">Saldo</div>
        <div id="creditos">
            <form>
                <input id="credito" type="text" size="5" value="R$ 0" readonly />
            </form>
        </div>

        <div id="valor_txt">Valor da Aposta</div>
        <div id="valor">
            <form>
                <input id="aposta" type="text" size="1" value="R$ 1" readonly />
            </form>
        </div>

        <div id="tela">
            <div id="slot1"><img id="escud1" src="img/diamante_verde.png" /></div>
            <div id="slot2"><img id="escud2" src="img/diamante_mesclado.png" /></div>
            <div id="slot3"><img id="escud3" src="img/diamante_rosa.png" /></div>
            <div id="slot4"><img id="escud4" src="img/cifrao.png" /></div>
        </div>

        <div id="botoes">
            <img src="img/apostamenos.gif" onclick="apostaMenos();" />
            <img src="img/apostamais.gif" onclick="apostaMais();" />
            <img src="img/jogar.gif" onclick="jogar();" />
        </div>

        <div id="rodapé">
            <a href="tabela.html" target='_blank'>Clique aqui para ver a Tabela de prêmios que você poderá ganhar neste jogo!</a>
        </div>
    </div>
</body>
</html>
