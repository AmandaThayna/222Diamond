<!DOCTYPE html>
<html>
<head>
<title>Jogo de Azar - Jogo da Velha com Tigrinho</title>
<style>
  table {
    border-collapse: collapse;
    margin: 20px auto;
  }
  td {
    width: 50px;
    height: 50px;
    border: 1px solid black;
    text-align: center;
    font-size: 24px;
    cursor: pointer;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    /* Estilos para o efeito de hover */
    transition: background-color 0.3s;
  }
  td:hover {
    background-color: lightgray;
  }
  #result {
    font-size: 20px;
    margin-top: 10px;
  }
  .win-line {
    background-color: yellow; /* Cor da linha vencedora */
  }

</style>
</head>
<body>

<table>
  <tr>
    <td id="slot00"></td>
    <td id="slot01"></td>
    <td id="slot02"></td>
  </tr>
  <tr>
    <td id="slot10"></td>
    <td id="slot11"></td>
    <td id="slot12"></td>
  </tr>
  <tr>
    <td id="slot20"></td>
    <td id="slot21"></td>
    <td id="slot22"></td>
  </tr>
</table>

<p>Aposta: <span id="betAmount">1</span></p>
<button onclick="spinSlots()">Girar Slots</button>
<div id="result"></div>

<script>
  const slots = [
    ["slot00", "slot01", "slot02"],
    ["slot10", "slot11", "slot12"],
    ["slot20", "slot21", "slot22"]
  ];
  const symbols = ["diamond_rosa", "diamond_amarela", "diamond_azul"];  // Adicionar mais símbolos
  let betAmount = 1;
  let winMultiplier = 1;

  function spinSlots() {
    for (let row of slots) {
      for (let slotId of row) {
        const cell = document.getElementById(slotId);
        const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
        cell.textContent = ""; // Limpar conteúdo anterior
        cell.style.backgroundImage = `url(images/${randomSymbol}.png)`; // Usar o nome do arquivo corretamente
      }
    }
    checkWinner();
  }

  function checkWinner() {
    const resultDiv = document.getElementById("result");
    resultDiv.textContent = "";

    //Verifique todas as combinações vencedoras.
    for(let i=0; i < 3; i++){

        if(checkWin(0,i)) return;
        if(checkWin(1,i)) return;
        if(checkWin(2,i)) return;
    }

    if(!checkWin(0,0)) {

        resultDiv.textContent = "Você não ganhou, tente novamente.";
    }

  }

  function checkWin(row,col){

        let a = slots[row][col].id;
        let b = slots[row][(col + 1) % 3].id;
        let c = slots[row][(col + 2) % 3].id;


        if (checkMatch(a,b,c)){

            highlightWinningLine(row, col);
            resultDiv.textContent = `Você ganhou! ${calculateWinAmount()}`

            return true;
        }

        return false
  }

  function highlightWinningLine(row, col) {
      let slotsRow = slots[row];

      const slot1 = slotsRow[col];
      const slot2 = slotsRow[(col + 1) % 3];
      const slot3 = slotsRow[(col + 2) % 3];

      const cell1 = document.getElementById(slot1.id);
      const cell2 = document.getElementById(slot2.id);
      const cell3 = document.getElementById(slot3.id);


      cell1.classList.add("win-line");
      cell2.classList.add("win-line");
      cell3.classList.add("win-line");

  }


  function checkMatch(id1, id2, id3){

      const cell1 = document.getElementById(id1);
      const cell2 = document.getElementById(id2);
      const cell3 = document.getElementById(id3);

      const symbol1 = cell1.style.backgroundImage.replace(/url\(["']?([^"']+)["']?\)/, '$1');
      const symbol2 = cell2.style.backgroundImage.replace(/url\(["']?([^"']+)["']?\)/, '$1');
      const symbol3 = cell3.style.backgroundImage.replace(/url\(["']?([^"']+)["']?\)/, '$1');
      
      return symbol1 === symbol2 && symbol2 === symbol3;
    }

  function calculateWinAmount(){
      return betAmount * winMultiplier;
  }
</script>
</body>
</html>
